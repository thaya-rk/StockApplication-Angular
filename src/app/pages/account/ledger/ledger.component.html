<div class="card">
  <div class="card-header d-flex justify-content-between align-items-center">
    ðŸ“˜ Ledger

    <!-- Toggle Filter -->
    <div class="btn-group btn-group-sm" role="group">
      <button class="btn btn-outline-primary" [class.active]="filter === 'ALL'" (click)="filter = 'ALL'">All</button>
      <button class="btn btn-outline-success" [class.active]="filter === 'FUNDS'" (click)="filter = 'FUNDS'">Deposit / Withdraw</button>
      <button class="btn btn-outline-info" [class.active]="filter === 'STOCKS'" (click)="filter = 'STOCKS'">Buy / Sell</button>
    </div>
  </div>

  <div class="list-group list-group-flush" *ngIf="filteredLedger().length > 0">
    <div class="list-group-item" *ngFor="let txn of filteredLedgerLimited()">
      <div class="row">
        <ng-container *ngIf="txn.type !== 'DEPOSIT' && txn.type !== 'WITHDRAW'">
          <div class="col-md-6 col-lg-4 mb-2">
            <strong>Company:</strong> {{ txn.stock?.companyName }}
          </div>
          <div class="col-md-6 col-lg-4 mb-2">
            <strong>Exchange:</strong> {{ txn.stock?.exchange }}
          </div>
          <div class="col-md-6 col-lg-4 mb-2">
            <strong>Stock Price:</strong> â‚¹{{ txn.stock?.stockPrice }}
          </div>
        </ng-container>

        <div class="col-md-6 col-lg-4 mb-2">
          <strong>Status:</strong> {{ txn.status }}
        </div>
        <div class="col-md-6 col-lg-4 mb-2">
          <strong>Type:</strong> {{ txn.type }}
        </div>
        <div class="col-md-6 col-lg-4 mb-2">
          <strong>Date:</strong> {{ txn.transactionDate | date:'short' }}
        </div>
        <div class="col-md-6 col-lg-4 mb-2">
          <strong>Amount:</strong> â‚¹{{ txn.totalAmount }}
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="filteredLedger().length > 5" class="text-center my-3">
    <button class="btn btn-outline-secondary" (click)="showAllTransactions = !showAllTransactions">
      {{ showAllTransactions ? 'Show Less' : 'Show All' }}
    </button>
  </div>

  <div *ngIf="filteredLedger().length === 0" class="text-muted p-3">
    No transactions found for the selected filter.
  </div>
</div>

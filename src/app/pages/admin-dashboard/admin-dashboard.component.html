<div class="dashboard-header d-flex justify-content-between">
  <h2>Admin Dashboard</h2>
  <button class="logout-btn" (click)="logout()">Logout</button>
</div>

<h3>Add Stock</h3>
<form (ngSubmit)="addStock()" #stockForm="ngForm" class="add-stock-horizontal bg-dark-subtle">
  <div class="form-group">
    <label for="companyName">Company Name</label>
    <input id="companyName" [(ngModel)]="newStock.companyName" name="companyName" placeholder="Company Name" required />
  </div>

  <div class="form-group">
    <label for="tickerSymbol">Ticker Symbol</label>
    <input id="tickerSymbol" [(ngModel)]="newStock.tickerSymbol" name="tickerSymbol" placeholder="Ticker Symbol" required />
  </div>

  <div class="form-group">
    <label for="stockPrice">Stock Price (₹)</label>
    <input id="stockPrice" [(ngModel)]="newStock.stockPrice" name="stockPrice" type="number" placeholder="Stock Price" required />
  </div>

  <div class="form-group">
    <label for="exchange">Exchange</label>
    <input id="exchange" style="width: 30px" [(ngModel)]="newStock.exchange" name="exchange" placeholder="Exchange" required />
  </div>

  <div class="form-group">
    <label for="sector">Sector</label>
    <input id="sector" [(ngModel)]="newStock.sector" name="sector" placeholder="Sector" required />
  </div>

  <div class="form-group">
    <label for="ipoQty">IPO Quantity</label>
    <input id="ipoQty" [(ngModel)]="newStock.ipoQty" name="ipoQty" type="number" placeholder="IPO Quantity" required />
  </div>

  <div class="form-group">
    <label for="imageURL">Image URL</label>
    <input id="imageURL" [(ngModel)]="newStock.imageURL" name="imageURL" placeholder="Image URL" />
  </div>

  <div class="form-group textarea-group">
    <label for="desc">Description</label>
    <textarea id="desc" [(ngModel)]="newStock.desc" name="desc" placeholder="Description" rows="2"></textarea>
  </div>

  <div class="form-group button-group">
    <button type="submit"  [disabled]="!stockForm.form.valid">Add Stock</button>
  </div>
</form>

<br />

<h3>All Stocks</h3>
<ul class="stock-list bg-dark-subtle">
  <li *ngFor="let stock of stocks" (click)="selectStock(stock)"
      [class.selected]="selectedStock?.stockId === stock.stockId"
      title="Click to select for update/delete">

    <div class="stock-info">
      <img [src]="stock.imageURL || 'https://via.placeholder.com/50?text=No+Img'" alt="{{stock.companyName}}" class="stock-logo" />
      <div class="stock-details">
        <div class="stock-company">{{ stock.companyName }} <span class="stock-ticker">({{ stock.tickerSymbol }})</span></div>
        <div class="stock-price">₹{{ stock.stockPrice }}</div>
        <small>{{ stock.exchange }} | Sector: {{ stock.sector }} | IPO Qty: {{ stock.ipoQty }}</small>
      </div>
    </div>

    <div class="actions">
      <button (click)="deleteStock(stock.stockId); $event.stopPropagation();" class="delete-btn">Delete</button>
    </div>
  </li>
</ul>
<div *ngIf="selectedStock" class="update-stock bg-success-subtle">
  <h4>Update Price for {{ selectedStock.companyName }}</h4>
  <input type="number" [(ngModel)]="updatedPrice" />
  <button (click)="updateStock()">Save</button>
  <button (click)="selectedStock = null">Cancel</button>
</div>
